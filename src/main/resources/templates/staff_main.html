<!DOCTYPE html>
<html lang="ko">
<th:block th:fragment="setContent(content)">
<head>
<meta charset="UTF-8">
<title>인사관리</title>
<div th:replace="~{fragments/css :: css}"></div>
<style>
button:hover {
background-color: #04AA6D;
}
.table-responsive-sm {
    margin-top: 20px;  /* Optional: Adds spacing between the image and the table */
}
html, body {
    font-family: 'Poppins', 'Noto Sans KR', sans-serif !important;
}
.pagination {
    display: flex;
    justify-content: center;
    margin-top: 20px; /* Adjust spacing as needed */
}

</style>

        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
      	integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    	<link rel="stylesheet" type="text/css" th:href="@{/bootstrap.min.css}"> 
   	  
</head>
<body>
 <body class="dashboard dashboard_1">
      <div class="full_container">
         <div class="inner_container">
            <head th:include="fragments/sidebar :: sidebar"></head>
            <!-- right content -->
            <div id="content">
            	<head th:include="fragments/topbar :: topbar"></head>
            	
            	<div class="page_title" style="margin-bottom: 0px;">
                   <h2 style="margin-bottom: 0px;">인사관리</h2>
                </div>
                              
                <div class="main p-5">
                     <form action="/admin/staff/search" method="POST">
                              <table class="table table-bordered">
                                 <tbody>
                                 <input type="text" value="0" name="del" hidden>
                                    <tr>
                                       <td class="table-light text-center" style="text-align: center; vertical-align: middle;">이름</td>
                                       <td><input class="form-control" style="width: 200px;" type="text" id="staff_search" name="staff_search"></td>
                                    </tr>
                                    <tr>
                                       <td class="table-light text-center" style="text-align: center; vertical-align: middle;">권한</td>
                                       <td style="padding: 10px 0 0 10px;">
	                                       <input type="radio" id="master" name="grade" value="0">
	                                       <label for="master">마스터</label>
	                                       &emsp;
	                                       <input type="radio" id="admin" name="grade" value="1">
	                                       <label for="admin">관리자</label>
	                                       &emsp;
	                                       <input type="radio" id="staff" name="grade" value="2">
	                                       <label for="staff">일반 staff</label>
                                       </td>
                                    </tr>
                                    <tr>
                                       <td class="table-light text-center" style="text-align: center; vertical-align: middle;">입사 날짜</td>
                                       <td>
                                       <input class="form-control" style="width: 200px; display: inline-block;" type="date" id="start" name="start">
                                       &emsp;
                                       ~
                                       &emsp;
                                       <input class="form-control" style="width: 200px; display: inline-block;" type="date" id="end" name="end">
                                       </td>
                                    </tr>
                                    <tr>
                                       <td class="table-light text-center" style="text-align: center; vertical-align: middle;">직급</td>
                                       <td>
                                       <select class="form-select" data-toggle="dropdown" name="auth" id="auth" style="width: 200px; display: inline-block;">
                                       		<option value="">선택</option>
                                     		<option value="1">staff</option>
                                     		<option value="2">assistant manager</option>
                                     		<option value="3">manager</option>
                                     		<option value="4">team leader</option>
                                     		<option value="5">executive</option>
                                     		<option value="6">vice president</option>
                                       		<option value="7">president</option>
                                       </select>
                                       </td>
                                    </tr>
                                 </tbody>
                              </table>
<!--                               <div style="text-align: right">
                  			<button type="reset" class="btn cur-p btn-primary" style="width: 200px; background-color: #6c757d; border-color: #6c757d">초기화</button>
                  			<button type="submit" class="btn cur-p btn-outline-primary" style="width: 200px; border-color: #04AA6D; color: #04AA6D"
                  			onmouseover="this.style.backgroundColor='#04AA6D'; this.style.color='white';" 
  							onmouseout="this.style.backgroundColor=''; this.style.color='#04AA6D';"
                  			>검색</button>
                  			</div> -->
                  			
                  			<div style="text-align: right;">
					            <button type="submit" class="btn btn-primary btn-sm"
					               style="width: 70px; border-radius: 8px;">검색</button>
					            <button type="reset" class="btn btn-secondary btn-sm"
					               style="width: 70px; border-radius: 8px;">초기화</button>
					         </div>
					         
                  	    </form>
                  	    
                  	    <hr style="color: black"><br>
                  	    
                
            	
            	<!--main-->
            	<!-- <div class="col-md-12" style="margin-top: 30px">
                           <div class="white_shd full margin_bottom_30" >
                              <div class="full graph_head">
                                 <div class="heading1 margin_0">
                                    <h2>인사 관리</h2>
                                 </div>
                              </div>
                              <div class="table_section padding_infor_info">
                                 <div class="table-responsive-sm">
                                 <form action="/admin/staff/search" method="POST">
                                    <table class="table table-bordered">
                                       <tbody>
                                       <input type="text" value="0" name="del" hidden>
                                          <tr>
                                             <td>이름</td>
                                             <td><input type="text" id="staff_search" name="staff_search"></td>
                                          </tr>
                                          <tr>
                                             <td>권한</td>
                                             <td>
                                             <input type="radio" id="master" name="grade" value="0">
                                             <label for="master">마스터</label>
                                             &emsp;
                                             <input type="radio" id="admin" name="grade" value="1">
                                             <label for="admin">관리자</label>
                                             &emsp;
                                             <input type="radio" id="staff" name="grade" value="2">
                                             <label for="staff">일반 staff</label>
                                             </td>
                                          </tr>
                                          <tr>
                                             <td>입사 날짜</td>
                                             <td>
                                             <input type="date" id="start" name="start">
                                             &emsp;
                                             ~
                                             &emsp;
                                             <input type="date" id="end" name="end">
                                             </td>
                                          </tr>
                                          <tr>
                                             <td>직급</td>
                                             <td>
                                             <select class="btn cur-p btn-outline-primary" data-toggle="dropdown" name="auth" id="auth" style="border-color: #04AA6D; color: #04AA6D"
                                             onmouseover="this.style.backgroundColor='#04AA6D'; this.style.color='white';"
                                             onmouseout="this.style.backgroundColor='white'; this.style.color='#04AA6D';"
                                             >
                                             	<option value="">선택</option>
                                           		<option value="1">staff</option>
                                           		<option value="2">assistant manager</option>
                                           		<option value="3">manager</option>
                                           		<option value="4">team leader</option>
                                           		<option value="5">executive</option>
                                           		<option value="6">vice president</option>
                                             	<option value="7">president</option>
                                             </select>
                                             </td>
                                          </tr>
                                       </tbody>
                                    </table>
                                    <div style="text-align: right">
                        			<button type="reset" class="btn cur-p btn-primary" style="width: 200px; background-color: #6c757d; border-color: #6c757d">초기화</button>
                        			<button type="submit" class="btn cur-p btn-outline-primary" style="width: 200px; border-color: #04AA6D; color: #04AA6D"
                        			onmouseover="this.style.backgroundColor='#04AA6D'; this.style.color='white';" 
        							onmouseout="this.style.backgroundColor=''; this.style.color='#04AA6D';"
                        			>검색</button>
                        			</div>
                        			</form>
                                 </div>
                              </div>
                           </div>
                        </div>
                         -->
                                               
                        
                <!-- first table end -->
                
                <!-- staff addition -->
                <div class="col-md-12">
                <div class="full margin_bottom_30">
                <div class="button_block" style="text-align: right;">
                <button type="button" class="model_bt btn btn-primary" style="background-color: #04AA6D; border-color: #04AA6D" data-toggle="modal" data-target="#myModal">직원 추가</button>
                </div>
                </div>
                </div>
                <!-- staff addition end  -->
                
                <!-- second table -->
            	<div class="col-md-12">
                           <div class="white_shd full margin_bottom_30">
                              <div class="full graph_head">
                                 <div class="heading1 margin_0">
                                    <h2>직원</h2>
                                 </div>
                              </div>
                              <div class="table_section padding_infor_info">
                                 <div class="table-responsive-sm">
                                    <table class="table table-hover">
                                       <thead >
                                          <tr>
                                             <th class="table-light">NO.</th>
                                             <th class="table-light">이름</th>
                                             <th class="table-light">직급</th>
                                             <th class="table-light">입사날짜</th>
                                             <th class="table-light">권한</th>
                                          </tr>
                                       </thead>
                                          <tr th:each="s : ${staffList}" th:onclick="staffDetail([[${s.hr_code}]])" style="vertical-align: middle; padding: 20px;">
                                             <td th:text = "${s.hr_code}" style="vertical-align: middle; padding: 12px;"></td>
                                             <td th:text = "${s.hr_name}" style="vertical-align: middle; padding: 12px;"></td>
                                             <td th:if = "${s.hr_authority == 1}" th:text = "'staff'" style="vertical-align: middle; padding: 12px;"></td> 
                                             <td th:if = "${s.hr_authority == 2}" th:text = "'assistant manager'" style="vertical-align: middle; padding: 12px;"></td>
                                             <td th:if = "${s.hr_authority == 3}" th:text = "'manager'" style="vertical-align: middle; padding: 12px;"></td>
                                             <td th:if = "${s.hr_authority == 4	}" th:text = "'team leader'" style="vertical-align: middle; padding: 12px;"></td>
                                             <td th:if = "${s.hr_authority == 5	}" th:text = "'executive'" style="vertical-align: middle; padding: 12px;"></td>
                                             <td th:if = "${s.hr_authority == 6	}" th:text = "'vice president'" style="vertical-align: middle; padding: 12px;"></td>
                                             <td th:if = "${s.hr_authority == 7	}" th:text = "'president'" style="vertical-align: middle; padding: 12px;"></td>
                                      		 <td th:text = "${s.hr_joindate}" style="vertical-align: middle; padding: 12px;"></td>
                                             <td th:if = "${s.hr_grade == 1	}" th:text = "'관리자'" style="vertical-align: middle; padding: 12px;"></td>
                                             <td th:if = "${s.hr_grade == 2	}" th:text = "'일반 staff'" style="vertical-align: middle; padding: 12px;"></td>
                                          </tr>
                                          </th:block> 
                                       </tbody>
                                    </table>
                                      <!-- Pagination Section -->
<!-- <div class="col-md-12 text-center mt-3">
    <nav aria-label="Page navigation">
        <ul class="pagination justify-content-center">
            Previous Page
            <li class="page-item">
                <a class="page-link" th:if="${currentPage > 1}" 
                   th:href="@{/admin/staff/main(pageNum=${currentPage - 1}, pageSize=${pageSize})}">
                    &lt;
                </a>
                <a class="page-link disabled" th:if="${currentPage <= 1}">
                    &lt;
                </a>
            </li>

            Page Numbers
            <li class="page-item" th:each="page : ${#numbers.sequence(startPage ?: 1, endPage ?: 1)}">
                <a class="page-link" 
                   th:href="@{/admin/staff/main(pageNum=${page}, pageSize=${pageSize})}"
                   th:classappend="${currentPage == page} ? 'active' : ''" 
                   th:text="${page}">
                </a>
            </li>

            Next Page
            <li class="page-item">
                <a class="page-link" th:if="${currentPage < totalPage}" 
                   th:href="@{/admin/staff/main(pageNum=${currentPage + 1}, pageSize=${pageSize})}">
                    &gt;
                </a>
                <a class="page-link disabled" th:if="${currentPage >= totalPage}">
                    &gt;
                </a>
            </li>
        </ul>
    </nav>
</div> -->

			                 <!-- 페이징 end -->   
                                 </div>
                              </div>
                              
                           </div>
                        </div>
                        
               <!-- 페이징 -->			
             
                        
                     </div>
                     
                  </div>
                  <!-- second table end -->
                
			
  
                  <!-- model popup -->
         <!-- The Modal -->
         <div class="modal fade" id="myModal">
            <div class="modal-dialog" style="max-width: 900px; margin: 100px auto;">
               <div class="modal-content" style="border-radius: 10px;">
                  <!-- Modal Header -->
                  
                  
<!--                   <div class="modal-header">
                     <h4 class="modal-title">직원 추가</h4>
                     <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                  </div> -->
                  
                  <!-- 직원추가 -->
                <div style="background-color: #04AA6D; border-radius: 10px 10px 0 0; padding: 15px; text-align: left; float: center;">
			  		<h4 style="text-align: left; display: inline-block; margin: 0 0 0 10px; width: 95%; color: white; font-size: 15px;">직원추가</h4>
			  		<button type="button" id="modalCloseButtonAdd" class="btn-close" data-dismiss="modal" aria-label="Close" style="background-color: rgb(192, 192, 192); font-weight: bold; text-align: right;"></button>
			  	</div>
			  	
<!-- 		    	<div style="padding: 30px;">
 -->                  
                  <!-- Modal body -->
                  <div class="modal-body">
                     <div class="col-md-6">
                           <div class="white_shd full margin_bottom_30" style="width:800px">	
                              <div class="table_section padding_infor_info">
                                 <div class="table-responsive-sm">
                                	<form action="/admin/staff/add" method="post" enctype="multipart/form-data" onsubmit="return valForm()">
<!--                                 	<div class="filebox">
											<label for="file">이미지 업로드</label>
											<input type="file" name="files" id="file" multiple>
                                 	</div> -->
                                    <table class="table table-bordered">
                                       <tbody>
                                          <tr>
                                             <td class="table-light text-center" style="width: 150px; vertical-align: middle;">이름</td>
                                             <td><input class="form-control" type="text" id="hr_name" name="hr_name"></td>
                                          </tr>
                                          <tr>
                                            <td class="table-light text-center" style="width: 150px;  vertical-align: middle;">직급</td>
                                             <td>
                                             <select class="form-select" data-toggle="dropdown" name="hr_authority" id="hr_authority">
                                           		<option value="1">staff</option>
                                           		<option value="2">assistant manager</option>
                                           		<option value="3">manager</option>
                                           		<option value="4">team leader</option>
                                           		<option value="5">executive</option>
                                           		<option value="6">vice president</option>
                                             	<option value="7">president</option>
                                             </select>
                                             </td>
                                          </tr>
                                          <tr>
                                             <td class="table-light text-center" style="width: 150px; vertical-align: middle;">입사 날짜</td>
                                             <td>
                                             <input type="date" class="form-control" id="hr_joindate" name="hr_joindate">
                                             </td>
                                          </tr>
                                          <tr>
                                             <td class="table-light text-center" style="width: 150px; vertical-align: middle;">권한</td>
                                             <td>
                                             <select class="form-select" data-toggle="dropdown" name="hr_grade" id="hr_grade">
                                           		<option value="1">관리자</option>
                                           		<option value="2">일반 staff</option>
                                             </select>
                                             </td>
                                          </tr>
                                          
                                          <tr>
                                             <td class="table-light text-center" style="width: 150px;  vertical-align: middle;" >이미지</td>
                                             <td>
                                             <input style="height: 33px; padding-left: 12px;" class="form-control" type="file" name="files" id="file" multiple>
                                             </td>
                                          </tr>
                                          <tr>
                                             <td class="table-light text-center" style="width: 150px; vertical-align: middle;">아이디</td>
                                             <td><input class="form-control" type="text" id="hr_id_input" name="hr_id" style="width: 90%; display: inline-block;" readonly>
                                             <button id="btnPop" type="button" class="btn cur-p btn-outline-primary" style="border-color: #04AA6D; color: #04AA6D"
                                             onmouseover="this.style.backgroundColor='#04AA6D'; this.style.color='white';" onmouseout="this.style.backgroundColor=''; this.style.color='';"
                                             onclick="$('#idCheck').modal('show')">🔍</button>
                                             </td>
                                          </tr>
                                          <tr>
                                             <td class="table-light text-center" style="width: 150px; vertical-align: middle;">비밀번호</td>
                                             <td><input class="form-control" type="text" id="hr_pwd_input" name="hr_pwd"></td>
                                          </tr>
                                       </tbody>
                                    </table>
                                    <button type="submit" class="btn cur-p btn-outline-primary" style="width: 200px; border-color:#04AA6D; color: #04AA6D"
                                             onmouseover="this.style.backgroundColor='#04AA6D'; this.style.color='white';" onmouseout="this.style.backgroundColor=''; this.style.color='#04AA6D';">추가</button>
                                    </form>
                                 </div>
                              </div>
                           </div>
                        </div>
                  </div>
                  <!-- Modal footer -->
               </div>
            </div>
         </div>
         <!-- end modal popup --
         <!-- modal popup for id-->
          <div class="modal fade" id="idCheck">
            <div class="modal-dialog" style="margin: 100px auto;">
               <div class="modal-content" style="border-radius: 10px;">
                  <!-- Modal Header -->
                  
                  <!-- 아이디검색 -->
                <div style="background-color: #0D6EFD; border-radius: 10px 10px 0 0; padding: 15px; text-align: left; float: center;">
			  		<h4 style="text-align: left; display: inline-block; margin: 0 0 0 10px; width: 92%; color: white; font-size: 15px;">아이디검색</h4>
			  		<button type="button" id="modalCloseButtonAdd" class="btn-close" data-dismiss="modal" aria-label="Close" style="background-color: rgb(192, 192, 192); font-weight: bold; text-align: right;"></button>
			  	</div>
			  	
                  <!-- Modal body -->
                  <div class="modal-body">
                     <div class="col-md-6">
                           <div class="white_shd full margin_bottom_30" style="width:400px">	
                              <div class="table_section padding_infor_info">
                                 <div class="table-responsive-sm">
                                	<form id="idSearchForm" action="/admin/staff/idSearch" method="post" onsubmit="idCheck(event)">
                                    <table class="table table-bordered">
                                       <tbody>
                                          <tr>
                                             <td class="table-light text-center" style="width: 150px; vertical-align: middle;">아이디 검색</td>
                                             <td><input class="form-control" type="text" id="id_hr_id" name="hr_id"></td>
                                          </tr>
                                    </table>
                                    <div id="msg"></div>
									<div id="searchResults" style="display:none;">
									<table class="table table-hover">
                                       <thead>
                                          <tr>
                                             <th>NO.</th>
                                             <th>이름</th>
                                             <th>직급</th>
                                             <th>입사날짜</th>
<!--                                              <th>권한</th>
 -->                                          </tr>
                                          <tr id="userRow">
                                          </tr>
                                         </thead>
                                        </table>
									</div>
                                    <button type="submit" class="btn cur-p btn-outline-primary" style="width: 200px; color: #04AA6D; border-color:#04AA6D;"
                                             onmouseover="this.style.backgroundColor='#04AA6D'; this.style.color='white';" onmouseout="this.style.backgroundColor=''; this.style.color='#04AA6D';">검색</button>
                                    </form>
                                 </div>
                              </div>
                           </div>
                        </div>
                  </div>
                  <!-- Modal footer -->
                  <div class="modal-footer">
                  	 <button class="btn btn-danger" type="button" id= "selectButton" onclick="sendToParent()" disabled style="width: 200px; color: white; background-color: #04AA6D; border-color: #04AA6D"
                                             onmouseover="this.style.backgroundColor='#04AA6D'; this.style.color='white';" onmouseout="this.style.backgroundColor='#04AA6D'; this.style.color='white';">선택하기</button>
                  </div>
               </div>
            </div>
         </div>       
         <!-- modal popup -->
         <!-- The Modal -->  
         <div class="modal fade" id="staffDetail" aria-labelledby="staffDetailLabel">
            <div class="modal-dialog" style="max-width: 800px; margin: 100px auto;">
               <div class="modal-content" style="border-radius: 10px;">
                  <!-- Modal Header -->
                  
                <!-- 인사정보 -->
                <div style="background-color: #8B393B; border-radius: 10px 10px 0 0; padding: 15px; text-align: left; float: center;">
			  		<h4 style="text-align: left; display: inline-block; margin: 0 0 0 10px; width: 95%; color: white; font-size: 15px;">인사정보</h4>
			  		<button type="button" id="modalCloseButtonAdd" class="btn-close" data-dismiss="modal" aria-label="Close" style="background-color: rgb(192, 192, 192); font-weight: bold; text-align: right;"></button>
			  	</div>
                  
                  
                  
                  <div class="modal-footer" style="text-align: center">
                    <button type="button" class="btn cur-p btn-primary" data-toggle="modal" style="background-color: #9D3CC3; border-color: #9D3CC3"data-target="#staffEdit" id="editButton" onclick="staffEdit($(this).data('hr-code'))">수정</button>
                  </div>
                  <!-- Modal body -->
                  <div class="modal-body">
                     <div class="col-md-6">
                           <div class="white_shd full margin_bottom_30"  style="width: 700px">
                              <div class="table_section padding_infor_info">

                                 <div class="row">
                                 <div class="col-md-6 col-sm-12">
                                 	<div style="text-align: center">
                                 	<img style="width: 70%; height: 200px; object-fit: cover" id="dstaffImage" src="/images/no_image.jpg" alt="Staff Image" class="image">
									</div>
									<p></p>
                                 	<div style="text-align: center"><h4 id="d_hr_name"></h4></div>
                                 </div>
                                 <div class="col-md-6 col-sm-12">
                                 <div class="table-responsive-sm">
                                    <table class="table table-bordered">
                                       <tbody>
                                          <tr>
                                             <td class="table-light text-center" style="width: 150px; vertical-align: middle;">NO.</td>
                                             <td id="d_hr_code"></td>
                                          </tr>
                                          <tr>
                                            <td class="table-light text-center" style="width: 150px; vertical-align: middle;">입사날짜</td>
                                            <td id="d_hr_joindate"></td>
                                          </tr>
                                          <tr>
                                             <td class="table-light text-center" style="width: 150px; vertical-align: middle;">권한</td>
                                             <td id="d_hr_grade"></td>
                                          </tr>
                                           <tr>
                                             <td class="table-light text-center" style="width: 150px; vertical-align: middle;">휴가 일수</td>
                                             <td id="d_hr_pdo"></td>
                                          </tr>
                                       </tbody>
                                    </table>
                                    <table class="table table-bordered">
                                       <tbody>
                                          <tr>
                                             <td class="table-light text-center" style="width: 150px; vertical-align: middle;">아이디</td>
                                             <td id="d_hr_id"></td>
                                          </tr>
          <!--                                 <tr>
                                            <td>비밀번호</td>
                                            <td id="d_hr_pwd"></td>
                                          </tr> -->
                                       </tbody>
                                    </table>
                                 </div>
                                 </div>
                              </div>
                              </div>
                           </div>
                        </div>
                  </div>
                  <!-- Modal footer -->
                  
               </div>
            </div>
         </div>
         <!-- end model popup -->
         <!-- edit Modal open -->
         <div class="modal fade" id="staffEdit" aria-labelledby="staffEditLabel">
            <div class="modal-dialog" style="max-width: 800px; margin: 100px auto;">
               <div class="modal-content" style="border-radius: 10px;">
                  <!-- Modal Header -->
                  
                  <!-- 직원수정 -->
                <div style="background-color: #9D3CC3; border-radius: 10px 10px 0 0; padding: 15px; text-align: left; float: center;">
			  		<h4 style="text-align: left; display: inline-block; margin: 0 0 0 10px; width: 95%; color: white; font-size: 15px;">인사수정</h4>
			  		<button type="button" id="modalCloseButtonAdd" class="btn-close" data-dismiss="modal" aria-label="Close" style="background-color: rgb(192, 192, 192); font-weight: bold; text-align: right;"></button>
			  	</div>
                  
                  
                  
                  <!-- Modal body -->
                  <div class="modal-body">
                     <div class="col-md-6">
                           <div class="white_shd full margin_bottom_30"  style="width: 700px">
                           <form action="/admin/staff/edit" method="post" enctype="multipart/form-data">
                              <div class="table_section padding_infor_info">
                                 <div class="row">
                                 <div class="col-md-6 col-sm-12">
                                 	<div style="text-align: center; margin: 100px 0 0 0;">
                                 	<img style="width: 60%; height: 180px; object-fit: cover" id="staffImage" src="/images/no_image.jpg" alt="Staff Image" class="image">
<!--                                  	<div class="filebox">
											<label for="file">이미지 업로드</label>
											<input type="file" name="files" id="file" multiple>
										
                                 	</div> -->
									</div>
									<p></p>
                                 	<div style="text-align: center"><h4 id="e_hr_name"></h4></div>
                                 </div>
                                 <div class="col-md-6 col-sm-12">
                                 <div class="table-responsive-sm">
                                 <input type="hidden" id="e_hr_code_input" name="hr_code" value="" />
                                    <table class="table table-bordered">
                                       <tbody>
                                          <tr>
                                             <td class="table-light text-center" style="width: 150px; vertical-align: middle;">NO.</td>
                                             <td id="e_hr_code"></td>
                                          </tr>
                                          <tr>
                                            <td class="table-light text-center" style="width: 150px; vertical-align: middle;">입사날짜</td>
                                            <td id="e_hr_joindate"></td>
                                          </tr>
                                          <tr>
                                             <td class="table-light text-center" style="width: 150px; vertical-align: middle;">권한</td>
                                             <td>
                                             <select class="form-select" data-toggle="dropdown" name="hr_grade" id="e_hr_grade">
                                           		<option value="1">관리자</option>
                                           		<option value="2">일반 staff</option>
                                             </select>
                                             </td>
                                          </tr>
                                           <tr>
                                             <td class="table-light text-center" style="width: 150px; vertical-align: middle;">휴가 일수</td>
                                             <td>
                                             <input class="form-control" type="number" name="hr_pdo" id="e_hr_pdo_input" placeholder=""/>
                                             </td>
                                          </tr>
                                          <tr>
                                             <td class="table-light text-center" style="width: 150px; vertical-align: middle;">이미지</td>
                                             <td>
                                             <input style="height: 33px; padding-left: 12px;" class="form-control" type="file" name="files" id="file" multiple>
                                             </td>
                                          </tr>
                                       </tbody>
                                    </table>
                                    <table class="table table-bordered">
                                       <tbody>
                                          <tr>
                                             <td class="table-light text-center" style="width: 150px; vertical-align: middle;">아이디</td>
                                             <td>
                                             <input class="form-control" type="text" name="hr_id" id="e_hr_id_input" placeholder="" readonly/>
                                             </td>
                                          </tr>
                                          <tr>
                                            <td class="table-light text-center" style="width: 150px; vertical-align: middle;">비밀번호</td>
                                            <td>
                                            <input class="form-control" type="text" name="hr_pwd" id="e_hr_pwd_input" placeholder=""/>
                                            </td>
                                          </tr>
                                       </tbody>
                                    </table>
                                    <div class="button_block">
                					<button type="submit" id="submit" class="model_bt btn btn-primary" style="width: 200px; color: #04AA6D; border-color:#04AA6D; background-color: white"
                                             onmouseover="this.style.backgroundColor='#04AA6D'; this.style.color='white';" onmouseout="this.style.backgroundColor='white'; this.style.color='#04AA6D';">저장</button>
                					</div>
                                 </div>
                                 </div>
                              </div>
                              </div>
                              </form>
                              </div>
                           </div>
                        </div>
                  </div>
                  <!-- Modal footer -->
               </div>
            </div>
         </div>
         
         
         
         
         <!-- edit Modal end -->
	</div>
	
	                        </div>
	
	<!-- main end -->
	<script>
	function valForm() {
		var name = document.getElementById('hr_name').value;
		if (name == '') {
			alert('이름을 입력해주세요.')
			return false;
		}
		var date = document.getElementById('hr_joindate').value;
		if (date == '') {
			alert('입사 날짜를 입력해주세요.');
			return false;
		}
		var id = document.getElementById('hr_id_input').value;
		if (id == '') {
			alert('아이디 중복확인을 통해 아이디를 입력해주세요.');
			return false;
		}
		var pwd = document.getElementById('hr_pwd_input').value;
		if (pwd == '') {
			alert('비밀번호는 반드시 입력해야합니다.');
			return false;
		}
		return true;
	}
	
	function idCheck(event){
		event.preventDefault();
		const hr_id = $('#id_hr_id').val();
		
		if (hr_id.trim()==="") {
			$('#msg').text('아이디를 입력해주세요.');
			return;
		}
		$('#msg').empty();
		$('#userRow').empty();
		$.ajax({
			//url: 'idSearch',
			url: '/admin/staff/idSearch',
			method: 'POST',
			data:{hr_id: hr_id},
			success: function(result) {
				if(result&& result.idSearch) {
					console.log(result.idSearch.hr_id);
					
					$('#searchResults').show();
					const user = result.idSearch;
					
					$('#userRow').empty();
					
					$('#userRow').append(`
						<td>${user.hr_code}</td>
						<td>${user.hr_name}</td>
						<td>${user.hr_grade === 1?"관리자":"일반staff"}</td>
						<td>${user.hr_joindate}</td>
					`);
					
					$('#selectButton').prop('disabled', true);
				}else {
					$('#msg').text('사용 가능한 아이디입니다.')
					$('#selectButton').prop('disabled', false);
				}
			},
			error: function(xhr, status, error) {
				console.error("Error fetching user details: ", error);
				$('#msg').text("검색 중 오류가 발생했습니다.");
			}
		});
	}
	
	function sendToParent() {
		const hr_id = $('#id_hr_id').val();
		$('#hr_id_input').val(hr_id);
		$('#idCheck').modal('hide');
	}
	
	function staffDetail(hr_code){
		$.ajax({
/* 			url: 'staffDetail',	
 */			
 			url: '/admin/staff/detail',
 			method: 'GET',
			data: {hr_code: hr_code},
			success: function(result) {
				if (result && result.detail) {
					$('#staffDetail').modal('show');
					
					console.log(result.detail.hr_name);
					$('#d_hr_name').text(result.detail.hr_name);
					$('#d_hr_code').text(result.detail.hr_code);
					$('#d_hr_joindate').text(result.detail.hr_joindate);
					var grade = (result.detail.hr_grade == 1)? "관리자" : "일반 staff";
					$('#d_hr_grade').text(grade);
					$('#d_hr_pdo').text(result.detail.hr_pdo);
					$('#d_hr_id').text(result.detail.hr_id);
					$('#d_hr_pwd').text(result.detail.hr_pwd);
					
					var imagePath = result.detail.hr_sybname ? '/uploads/' + result.detail.hr_sybname : '/images/no_image.jpg';
					console.log(imagePath);
					$('#dstaffImage').attr('src', imagePath);
					
					$('#editButton').attr('data-hr-code', result.detail.hr_code);
				}
				else{
					console.log("No staff info found");
				}
			},
			error: function(xhr, status, error) {
				console.error("Error fetching staff details:", error);
			}
		});
		}
	
	function staffEdit(hr_code){
		console.log("hr_code is: " + hr_code);
		
		$.ajax({
			//url: 'staffDetail',	
			url: '/admin/staff/detail',
			method: 'GET',
			data: {hr_code: hr_code},
			success: function(result) {
				if (result && result.detail) {
					$('#staffEdit').modal('show');
					
					console.log(result.detail.hr_name);
					$('#e_hr_name').text(result.detail.hr_name);
					console.log(result.detail.hr_code);
					$('#e_hr_code').text(result.detail.hr_code);
					console.log(result.detail.hr_joindate);
					$('#e_hr_joindate').text(result.detail.hr_joindate);
					
					console.log(result.detail.hr_pdo);
					$('#e_hr_pdo_input').val(result.detail.hr_pdo);
										
					console.log(result.detail.hr_id);
					$('#e_hr_id_input').val(result.detail.hr_id);
					
					console.log(result.detail.hr_pwd);
					$('#e_hr_pwd_input').val(result.detail.hr_pwd);
					
					$('#submit').attr('data-hr-code', result.detail.hr_code);
					
					$('#e_hr_code_input').val(result.detail.hr_code);
					
					var imagePath = result.detail.hr_sybname ? '/uploads/' + result.detail.hr_sybname : '/images/no_image.jpg';
					console.log(imagePath);
					$('#staffImage').attr('src', imagePath);
				}
				else{
					console.log("No staff info found");
				}
			},
			error: function(xhr, status, error) {
				console.error("Error fetching staff details:", error);
			}
		});
		}

	</script>
	
	
	
    <!-- jQuery -->
     <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <script src="/js/popper.min.js"></script>
      <script src="/js/bootstrap.min.js"></script>
      <!-- wow animation -->
      <script src="/js/animate.js"></script>
      <!-- select country -->
      <script src="/js/bootstrap-select.js"></script>
      <!-- owl carousel -->
      <script src="/js/owl.carousel.js"></script> 
      <!-- chart js -->
      <script src="/js/Chart.min.js"></script>
      <script src="/js/Chart.bundle.min.js"></script>
      <script src="/js/utils.js"></script>
      <script src="/js/analyser.js"></script>
      <!-- nice scrollbar -->
      <script src="/js/perfect-scrollbar.min.js"></script>
      <script>
         var ps = new PerfectScrollbar('#sidebar');
      </script>
      <!-- custom js -->
      <script src="/js/chart_custom_style1.js"></script>
      <script src="/js/custom.js"></script>
   </body>
</body>
</html>